<div class="dti-container">
    <h2>Debt-to-Income (DTI) Calculator</h2>
  
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="form-field" *ngFor="let field of [
        { label: 'Annual Income', name: 'annualIncome' },
        { label: 'Min Credit Card Payments', name: 'minCreditCardPayments' },
        { label: 'Car Loan Payments', name: 'carLoanPayments' },
        { label: 'Student Loan Payments', name: 'studentLoanPayments' },
      ]">
        <label [for]="field.name">{{ field.label }}</label>
        <input
          type="number"
          [id]="field.name"
          [formControlName]="field.name"
          placeholder="Enter {{ field.label }}"
        />
        <div class="error" *ngIf="form.get(field.name)?.invalid && form.get(field.name)?.touched">
          This field is required and must be 0 or more.
        </div>
      </div>
  
      <div class="button-row">
        <button class="fancy-button" type="submit" [disabled]="form.invalid">Calculate</button>
        <button class="fancy-button reset" type="button" (click)="onReset()">Reset</button>
      </div>
    </form>
  
    <div class="result" *ngIf="result$ | async as result">
      <h3>DTI Result</h3>
      <p><strong>DTI Percentage:</strong> {{ result.DtiPercentage }}%</p>
      <p><strong>Total Debts:</strong> ${{ result.TotalDebts }}</p>
      <p><strong>Proposed Monthly Payment:</strong> ${{ result.ProposedMonthlyPayment }}</p>
      <p><strong>Remaining Monthly Income:</strong> ${{ result.RemainingMonthlyIncome }}</p>
    </div>
  
    <div class="error" *ngIf="error$ | async as error">
      <p class="error-text">Error: {{ error }}</p>
    </div>
  
    <div *ngIf="loading$ | async" class="loading">
      Calculating...
    </div>
  </div>
  